import{a as y,b as I}from"./chunk-FLXUFWP5.js";import{$a as i,Ba as u,Da as g,Eb as P,Ha as a,Ia as o,Ja as j,Ma as M,Pa as f,Ra as C,S as h,T as x,ab as l,bb as v,ia as r,ja as d,sa as _,ub as b,xa as p,xb as O,xc as S}from"./chunk-Q2PGDZ6U.js";function k(s,t){if(s&1){let e=M();a(0,"div",10),f("click",function(){let c=h(e).index,m=C();return x(m.voltearTarjeta(c))}),j(1,"div",11),a(2,"div",12)(3,"mat-icon"),i(4),o()()()}if(s&2){let e=t.$implicit;g("volteada",e.volteada||e.encontrada),r(4),l(e.icono)}}function R(s,t){if(s&1&&(a(0,"mat-icon",13),i(1),o()),s&2){let e=t.$implicit;r(),l(e)}}var E=class s{constructor(t,e){this.router=t;this.apiService=e}tarjetas=[];seleccionadas=[];puntaje=0;tiempoRestante=30;cronometroInterval;juegoTerminado=!1;mensajeResultado="";estrellas=[];iconos=["home","favorite","star","face","pets","home","favorite","star","face","pets"];ngOnInit(){this.iniciarJuego()}iniciarJuego(){this.juegoTerminado=!1,this.puntaje=0,this.tiempoRestante=30,this.tarjetas=this.iconos.map(t=>({icono:t,volteada:!1,encontrada:!1})).sort(()=>Math.random()-.5),this.iniciarCronometro()}iniciarCronometro(){this.cronometroInterval=setInterval(()=>{this.tiempoRestante>0?this.tiempoRestante--:(clearInterval(this.cronometroInterval),this.finalizarJuego())},1e3)}voltearTarjeta(t){let e=this.tarjetas[t];e.volteada||e.encontrada||this.seleccionadas.length===2||(e.volteada=!0,this.seleccionadas.push(t),this.seleccionadas.length===2&&this.verificarPareja())}verificarPareja(){let[t,e]=this.seleccionadas,n=this.tarjetas[t],c=this.tarjetas[e];n.icono===c.icono?(n.encontrada=!0,c.encontrada=!0,this.puntaje+=2,this.tarjetas.every(m=>m.encontrada)&&this.finalizarJuego()):setTimeout(()=>{n.volteada=!1,c.volteada=!1},1e3),this.seleccionadas=[]}finalizarJuego(){this.juegoTerminado=!0,clearInterval(this.cronometroInterval);let t=this.calcularEstrellas();this.mensajeResultado=t.mensaje,this.estrellas=t.estrellas;let e=document.querySelector(".modal");e&&e.classList.add("visible"),this.guardarResultado()}guardarResultado(){let t=localStorage.getItem("userId"),e=localStorage.getItem("userType");if(!t||!e){console.error("Datos de usuario no disponibles en localStorage.");return}let n={usuario_id:t,usuario_tipo:e,juego2_puntaje:this.puntaje};this.apiService.guardarRespuestaBasica(n).subscribe({next:()=>console.log("Puntaje guardado correctamente"),error:c=>console.error("Error al guardar el puntaje:",c)})}calcularEstrellas(){return this.puntaje<=4?{mensaje:"\xA1Puedes mejorar!",estrellas:["star"]}:this.puntaje<=8?{mensaje:"\xA1Muy bien!",estrellas:["star","star"]}:{mensaje:"\xA1Excelente!",estrellas:["star","star","star"]}}irSiguienteActividad(){this.router.navigate(["/encuentra-diferente"])}static \u0275fac=function(e){return new(e||s)(d(P),d(S))};static \u0275cmp=_({type:s,selectors:[["app-memoria-asociativa"]],decls:25,vars:7,consts:[[1,"juego-container"],[1,"cronometro"],[1,"tablero"],["class","tarjeta",3,"volteada","click",4,"ngFor","ngForOf"],[1,"modal"],[1,"modal-content"],[1,"puntuacion"],[1,"estrellas"],["class","estrella-icon",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary",3,"click"],[1,"tarjeta",3,"click"],[1,"cara","reverso"],[1,"cara","frente"],[1,"estrella-icon"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"strong"),i(3),o()(),a(4,"div")(5,"h2"),i(6,"Secci\xF3n 1: Memoria"),o(),a(7,"h3"),i(8,"Memoria asociativa"),o(),a(9,"p"),i(10," Gira las cartas y encuentra las parejas de im\xE1genes antes que el tiempo finalice "),o()(),a(11,"div",2),p(12,k,5,3,"div",3),o(),a(13,"div",4)(14,"div",5)(15,"h2"),i(16),o(),a(17,"p",6),i(18),o(),a(19,"div",7),p(20,R,2,1,"mat-icon",8),o(),a(21,"p"),i(22,"\xA1Gracias por jugar! \xBFEst\xE1s listo para continuar?"),o(),a(23,"button",9),f("click",function(){return n.irSiguienteActividad()}),i(24,"Seguir"),o()()()()),e&2&&(r(3),v("Tiempo restante: ",n.tiempoRestante," segundos"),r(9),u("ngForOf",n.tarjetas),r(),g("visible",n.juegoTerminado),r(3),l(n.mensajeResultado),r(2),v("Puntuaci\xF3n Final: ",n.puntaje,""),r(2),u("ngForOf",n.estrellas))},dependencies:[O,b,I,y],styles:[".juego-container[_ngcontent-%COMP%]{text-align:center;margin:20px auto;max-width:600px}.cronometro[_ngcontent-%COMP%]{font-size:18px;margin-bottom:20px;color:#911a0a}.resultado-modal[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:10px!important;width:20px;height:20px}.tablero[_ngcontent-%COMP%]{display:grid;gap:10px;grid-template-columns:repeat(auto-fit,minmax(80px,1fr));justify-content:center}.tarjeta[_ngcontent-%COMP%]{width:80px;height:80px;perspective:1000px;position:relative}.cara[_ngcontent-%COMP%]{width:100%;height:100%;position:absolute;backface-visibility:hidden;border-radius:8px;display:flex;align-items:center;justify-content:center;transition:transform .6s}.reverso[_ngcontent-%COMP%]{background-color:#ffc107;border:2px solid #ff9800}.frente[_ngcontent-%COMP%]{background-color:#4caf50;transform:rotateY(180deg);color:#fff}.tarjeta.volteada[_ngcontent-%COMP%]   .reverso[_ngcontent-%COMP%]{transform:rotateY(180deg)}.tarjeta.volteada[_ngcontent-%COMP%]   .frente[_ngcontent-%COMP%]{transform:rotateY(0)}.resultado[_ngcontent-%COMP%]{margin-top:20px;font-size:18px;color:#4caf50;font-weight:700}.estrellas[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:10px;margin-bottom:20px}.estrellas[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:36px;color:#ffc107}.modal[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;padding:20px;border-radius:8px;box-shadow:0 4px 10px #0003;display:none;z-index:1000}.modal.visible[_ngcontent-%COMP%]{display:block}.modal-content[_ngcontent-%COMP%]{text-align:center}.modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#4caf50;margin-bottom:10px}.modal-content[_ngcontent-%COMP%]   .estrellas[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:10px;margin-bottom:15px}.modal-content[_ngcontent-%COMP%]   .estrella-icon[_ngcontent-%COMP%]{font-size:25px;color:#ffc107}.modal-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:16px;padding:10px 20px;background-color:#4caf50;color:#fff;border:none;border-radius:8px;cursor:pointer;transition:background-color .3s ease}.modal-content[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#388e3c}"]})};export{E as MemoriaAsociativaComponent};
